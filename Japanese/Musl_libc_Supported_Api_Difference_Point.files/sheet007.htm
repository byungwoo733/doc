<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:x="urn:schemas-microsoft-com:office:excel"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=Excel.Sheet>
<meta name=Generator content="Microsoft Excel 15">
<link id=Main-File rel=Main-File
href="../Musl_libc_Supported_Api_Difference_Point.htm">
<link rel=File-List href=filelist.xml>
<link rel=Stylesheet href=stylesheet.css>
<style>
<!--table
	{mso-displayed-decimal-separator:"\.";
	mso-displayed-thousand-separator:"\,";}
@page
	{margin:.75in .7in .75in .7in;
	mso-header-margin:.3in;
	mso-footer-margin:.3in;}
ruby
	{ruby-align:left;}
rt
	{color:windowtext;
	font-size:6.0pt;
	font-weight:400;
	font-style:normal;
	text-decoration:none;
	font-family:"ＭＳ Ｐゴシック", monospace;
	mso-font-charset:128;
	mso-char-type:katakana;
	display:none;}
-->
</style>
<![if !supportTabStrip]><script language="JavaScript">
<!--
function fnUpdateTabs()
 {
  if (parent.window.g_iIEVer>=4) {
   if (parent.document.readyState=="complete"
    && parent.frames['frTabs'].document.readyState=="complete")
   parent.fnSetActiveSheet(6);
  else
   window.setTimeout("fnUpdateTabs();",150);
 }
}

if (window.name!="frSheet")
 window.location.replace("../Musl_libc_Supported_Api_Difference_Point.htm");
else
 fnUpdateTabs();
//-->
</script>
<![endif]>
</head>

<body link=blue vlink=purple>

<table border=0 cellpadding=0 cellspacing=0 width=1231 style='border-collapse:
 collapse;table-layout:fixed;width:923pt'>
 <col width=39 style='mso-width-source:userset;mso-width-alt:1248;width:29pt'>
 <col class=xl65 width=31 style='mso-width-source:userset;mso-width-alt:992;
 width:23pt'>
 <col width=240 style='mso-width-source:userset;mso-width-alt:7680;width:180pt'>
 <col width=417 style='mso-width-source:userset;mso-width-alt:13344;width:313pt'>
 <col width=504 style='mso-width-source:userset;mso-width-alt:16128;width:378pt'>
 <tr height=19 style='height:14.25pt'>
  <td height=19 width=39 style='height:14.25pt;width:29pt'></td>
  <td class=xl65 width=31 style='width:23pt'></td>
  <td width=240 style='width:180pt'></td>
  <td width=417 style='width:313pt'></td>
  <td width=504 style='width:378pt'></td>
 </tr>
 <tr height=20 style='height:15.0pt'>
  <td height=20 style='height:15.0pt'></td>
  <td class=xl71 width=31 style='width:23pt'>No</td>
  <td class=xl72 width=240 style='width:180pt'>ケース</td>
  <td class=xl72 width=417 style='width:313pt'><ruby>相違点<span style='display:
  none'><rt>ソウイテン</rt></span></ruby></td>
  <td class=xl72 width=504 style='width:378pt'><ruby>理由<span style='display:
  none'><rt>リユウ</rt></span></ruby></td>
 </tr>
 <tr height=47 style='mso-height-source:userset;height:35.25pt'>
  <td height=47 style='height:35.25pt'></td>
  <td class=xl70 width=31 style='width:23pt'>1</td>
  <td class=xl68 width=240 style='width:180pt'>浮動小数点例外</td>
  <td class=xl68 width=417 style='width:313pt'>VEアーキテクチャーによる浮動小数点例外は、x86アーキテクチャーとは異なる場合があります。</td>
  <td class=xl68 width=504 style='width:378pt'>VEには非正規化数に対応するハードウェアがありません。</td>
 </tr>
 <tr height=40 style='mso-height-source:userset;height:30.0pt'>
  <td height=40 style='height:30.0pt'></td>
  <td rowspan=2 class=xl120 width=31 style='border-bottom:1.0pt solid black;
  border-top:none;width:23pt'>2</td>
  <td rowspan=2 class=xl119 width=240 style='border-bottom:1.0pt solid black;
  border-top:none;width:180pt'>open システムコール</td>
  <td class=xl69 width=417 style='width:313pt'>VEでは、ユーザープログラムによるopen（）の最初の呼び出しでは8が返されます。</td>
  <td rowspan=2 class=xl119 width=504 style='border-bottom:1.0pt solid black;
  border-top:none;width:378pt'>ドライバ・veosなどとの通信のような内部的な使用のために、擬似プロセスによってfdが<ruby>使用<span
  style='display:none'><rt>シヨウ</rt></span></ruby>されています。</td>
 </tr>
 <tr height=51 style='mso-height-source:userset;height:38.25pt'>
  <td height=51 style='height:38.25pt'></td>
  <td class=xl68 width=417 style='width:313pt'>Linuxでは、ユーザープログラムによるopen（）の呼び出しでは3が返されます。</td>
 </tr>
 <tr height=27 style='mso-height-source:userset;height:20.25pt'>
  <td height=27 style='height:20.25pt'></td>
  <td rowspan=2 class=xl120 width=31 style='border-bottom:1.0pt solid black;
  border-top:none;width:23pt'>3</td>
  <td rowspan=2 class=xl119 width=240 style='border-bottom:1.0pt solid black;
  border-top:none;width:180pt'>スレッドの最小スタックサイズ( PTHREAD_STACK_MIN)</td>
  <td class=xl69 width=417 style='width:313pt'>VEでは最小のスタックサイズは4MBです。</td>
  <td rowspan=2 class=xl119 width=504 style='border-bottom:1.0pt solid black;
  border-top:none;width:378pt'>VEアーキテクチャのためカスタマイズされています。</td>
 </tr>
 <tr height=37 style='height:27.75pt'>
  <td height=37 style='height:27.75pt'></td>
  <td class=xl68 width=417 style='width:313pt'>x86アーキテクチャに対し、glibcでは16KB、musl-libcでは2KBとなっています。</td>
 </tr>
 <tr height=109 style='mso-height-source:userset;height:81.75pt'>
  <td height=109 class=xl122 style='height:81.75pt'>　</td>
  <td class=xl120 width=31 style='border-top:none;border-left:none;width:23pt'>4</td>
  <td class=xl119 width=240 style='border-top:none;border-left:none;width:180pt'>syscall()を使用してSIGCANCELシグナルを直接送信</td>
  <td class=xl123 width=417 style='border-top:none;border-left:none;width:313pt'>syscall（）（例：Kill（）、syscall（SYS_tgkill）など）を使用してSIGCANCELシグナルが送信されると、スレッドグループ全体がターゲットスレッドの代わりに終了します。</td>
  <td class=xl124 width=504 style='border-top:none;border-left:none;width:378pt'><br>
   
  glibcとは異なり、musl-libcはpthread_cancel（）が呼び出された後にSIGCANCELのハンドラをインストールします。したがって、SIGCANCELシグナルがpthread_cancel（）の呼び出しの前に送信されると、SIGCANCELのデフォルトアクションが終了するため、スレッドグループは終了します。</td>
 </tr>
 <tr height=235 style='height:176.25pt'>
  <td height=235 style='height:176.25pt'></td>
  <td class=xl130>5</td>
  <td class=xl127 width=240 style='width:180pt'>pthread_attr_setstack() によるスレッド<ruby>用<span
  style='display:none'><rt>ヨウ</rt></span></ruby>スタックサイズの<ruby>指定<span
  style='display:none'><rt>シテイ</rt></span></ruby></td>
  <td class=xl125 width=417 style='width:313pt'>pthread_attr_setstack() API
  でスレッド<ruby>属性<span style='display:none'><rt>ゾクセイ</rt></span></ruby>オブジェクトのスタックサイズ<ruby>属性<span
  style='display:none'><rt>ゾクセイ</rt></span></ruby>を<ruby>指定<span
  style='display:none'><rt>シテイ</rt></span></ruby>してスレッドを<ruby>生成<span
  style='display:none'><rt>セイセイ</rt></span></ruby>した<ruby>場合<span
  style='display:none'><rt>バアイ</rt></span></ruby>、スタックオーバーフローによるエラーが<ruby>発生<span
  style='display:none'><rt>ハッセイ</rt></span></ruby>しません。</td>
  <td class=xl126 width=504 style='width:378pt'>スレッドAPI の Manpage
  に定義される動作は以下の通りです。<br>
    アプリケーションが pthread_attr_setstack() によってスレッドスタックを割り当てるとき、guard size
  属性は無視されます（libcによってガード領域は作成されません）。スタックのオーバーフローは（mprotect(2)
  でスタック用に確保した領域の終端にガード領域を指定するなどして）アプリケーションの責任で対処する必要があります。<br>
    VE では以下の様に動作が異なります。<br>
   
  ガード領域が（ユーザによって）指定された後であっても、スタックは領域の終端を超えて伸長し続けます。その結果は不定です。そのため、pthread_attr_setstack()
  は使うべきではありません。<br>
    <br>
    アプリケーションが子スレッドのスタックサイズを pthread_attr_setstacksize(3) で指定した場合は、この問題は発生しません。</td>
 </tr>
 <tr height=91 style='height:68.25pt'>
  <td height=91 style='height:68.25pt'></td>
  <td class=xl130 style='border-top:none'>6</td>
  <td class=xl127 width=240 style='border-top:none;width:180pt'>/etc/opt/nec/ve/musl/ld-musl-ve.path<span
  style='mso-spacerun:yes'> </span></td>
  <td class=xl125 width=417 style='border-top:none;width:313pt'>VE において、
  &quot;ld-musl-ve.path&quot; は<span style='mso-spacerun:yes'> </span><ruby>動的<span
  style='display:none'><rt>ドウテキ</rt></span></ruby>ライブラリを<ruby>検索<span
  style='display:none'><rt>ケンサク</rt></span></ruby>・ロードするパスの<ruby>指定<span
  style='display:none'><rt>シテイ</rt></span></ruby>に<ruby>使用<span
  style='display:none'><rt>シヨウ</rt></span></ruby>されます。</td>
  <td class=xl126 width=504 style='border-top:none;width:378pt'>musl-libc
  におけるパスの<ruby>検索<span style='display:none'><rt>ケンサク</rt></span></ruby><ruby>順序<span
  style='display:none'><rt>ジュンジョ</rt></span></ruby>は<ruby>次<span
  style='display:none'><rt>ツギ</rt></span></ruby>の<ruby>通<span style='display:
  none'><rt>トオ</rt></span></ruby>りです。<br>
    1. VE_LD_LIBRARY_PATH<br>
    2. DT_RPATH/DT_RUNPATH (binutils )<br>
    3. /etc/opt/nec/ve/musl/ld-musl-ve.path<br>
    4. <ruby>標準<span style='display:none'><rt>ヒョウジュン</rt></span></ruby>パス
  (/opt/nec/ve/musl/lib/)</td>
 </tr>
 <![if supportMisalignedColumns]>
 <tr height=0 style='display:none'>
  <td width=39 style='width:29pt'></td>
  <td width=31 style='width:23pt'></td>
  <td width=240 style='width:180pt'></td>
  <td width=417 style='width:313pt'></td>
  <td width=504 style='width:378pt'></td>
 </tr>
 <![endif]>
</table>

</body>

</html>
